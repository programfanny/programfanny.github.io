<!DOCTYPE html>
<html>
  <head>
    <title>文件示例</title>
    <meta name="name" content="content" charset="utf-8">
    <style>
    div{margin:5px;width:360px;height:250px;border:3px solid #90f474;overflow-y:scroll;}
    .left{float:left;width:420px;height:600px;}
    .right{float:right;width:200px;height:600px;}
    .middle{float:none;width:660px;height:600px;margin:0px auto;}
    </style>
  </head>
  <body>
  <div class="left">
    <input type="file" id="file" />
    <input type="button" id="b02" onclick="readText()" value="File Button">
    <div id="tt">
  
    </div>

    <input type="button" id="b01" onclick="mydisp()" value="读取div文本"/>
    <div id="mydiv">
          
    </div>
    </div>
    <div class="right" id="screen">
    </div>
    <div class="middle" id="show">
    </div>
  
  </body>
</html>

<script type="text/javascript" charset="ASCII">
  function readText() {
    var file=document.getElementById("file").files[0];
    var reader=new FileReader();
    reader.readAsText(file);
    reader.onload=function(data)
    {
      var tt=document.getElementById("tt");
      tt.innerHTML=this.result;
    }
  }

  function mydisp() {
    var vv,uu,len,i,bk,fd;
    var start,stop;
    var sp="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
    var ww=document.getElementById("mydiv");
    var ss=document.getElementById("tt");
    var ws=document.getElementById("screen");
    var sh=document.getElementById("show");
    vv=ss.innerHTML;
    len=vv.length;
    stop=0;start=0;
    for(i=0;i<50;i++){
    start=vv.indexOf("&gt",stop);
    ws.innerHTML = ws.innerHTML + "start=" + start + "     ";
    stop=vv.indexOf("&gt",start+4);
    ws.innerHTML = ws.innerHTML + "stop=" + stop +"<br>";
    uu=vv.substring(start,stop);
    sh.innerHTML=sh.innerHTML+uu+"<br>";
    bk=uu.indexOf("[");
    ws.innerHTML = ws.innerHTML + "brkk=" + bk + "<br>";
    if(bk!=-1){
      fd=start+4;bk=0;
      while(fd<stop)      
      {
      fu=vv.indexOf("[",fd);
      if(fu>stop){fu=stop-1;bk=1;}
      ws.innerHTML = ws.innerHTML + "   fd="+fd + "  fu=" + fu + "<br>" ;
      ww.innerHTML = ww.innerHTML + vv.substring(fd,fu)+"<br>";
      if(bk==0){ww.innerHTML = ww.innerHTML + sp+"[";}
      fd=fu+1;
      }
    }
    ws.innerHTML=ws.innerHTML+"<hr width='80%'>";
    start=stop+1; 
    }
 }
</script>
